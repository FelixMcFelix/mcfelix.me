<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Palette/Shader.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Palette/Shader.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* global WebGLShader */
/**
* @classdesc Abstraction of shader references to allow easy manipulation.
* @class Palette.Shader
* @description Initialise and compile a valid Source Object into a Shader.
* @param {WebGLRenderingContext} gl - The context the shader will belong to and be compiled by.
* @param {string} name - The name the shader object will be referred to by.
* @param {number} type - The class of the shader contained, either Palette.Shader.VS or Palette.Shader.FS.
* @param {string} source - The source code to compile the shader from.
* @param {WebGLRenderingContext} gl - The context the shaders of this program will belong to and be compiled by.
* @param {object} [attrs] - The array which contains attribute names and default values, as an array of 3-tuples.
* @author FelixMcFelix (Kyle S.)
*/
Palette.Shader = function(gl, name, type, source, attrs){
	/**
	* The shader's name.
	* @name Palette.Shader#name
	* @type String
	* @protected
	* @readonly
	*/
	this.name = name;

	/**
	* The type of shader, either Palette.Shader.VS or Palette.Shader.FS for objects.
	* @name Palette.Shader#type
	* @type int
	* @protected
	* @readonly
	*/
	this.type = type;

	/**
	* The shader's attached context.
	* @name Palette.Shader#context
	* @type WebGLRenderingContext
	* @protected
	* @readonly
	*/
	this.context = gl;

	/**
	* The shader's attribute array.
	* @name Palette.Shader#attrs
	* @type Array[]
	* @protected
	* @readonly
	*/
	this.attrs = attrs;

	/**
	* The reference to the compiled shader in the WebGLRenderingContext.
	* @name Palette.Shader#shader
	* @type WebGLShader
	* @protected
	* @readonly
	*/
	this.shader = null;

	/**
	* Has the shader attempted compilation yet?
	* @name Palette.Shader#compiled
	* @type Boolean
	* @private
	* @readonly
	*/
	this.compiled = false;

	this.bakeShader(source);
};

Palette.Shader.prototype = {
	/**
	* Compile shader code from a source string. Once compiled, you cannot recompile.
	* @method Palette.Shader#bakeShader
	* @protected
	* @param {string} source - The source code to compile and attach to this shader object.
	* @return {boolean} True if successful, false if unsuccessful.
	*/
	bakeShader: function(source){
		if (this.compiled){return null;}

		this.compiled = true;

		switch(this.type){
			case Palette.Shader.VS:
				this.shader = this.context.createShader(this.context.VERTEX_SHADER);
				break;
			case Palette.Shader.FS:
				this.shader = this.context.createShader(this.context.FRAGMENT_SHADER);
				break;
			default:
				return false;
		}

		this.context.shaderSource(this.shader, source);
		this.context.compileShader(this.shader);
		if (!this.context.getShaderParameter(this.shader, this.context.COMPILE_STATUS)) {
			alert("An error occurred compiling the shaders: " + this.context.getShaderInfoLog(this.shader));
			return false;
		}

		return true;
	}
};

Palette.Shader.VS		= 0;
Palette.Shader.FS		= 1;
Palette.Shader.LIST		= 2;

Palette.Shader.prototype.constructor = Palette.Shader;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="MVM.DataModel.html">DataModel</a></li><li><a href="MVM.StackFrame.html">StackFrame</a></li><li><a href="MVM.VM.html">VM</a></li><li><a href="Palette.Manager.html">Manager</a></li><li><a href="Palette.Program.html">Program</a></li><li><a href="Palette.Shader.html">Shader</a></li><li><a href="Palette.ShaderFactory.html">ShaderFactory</a></li><li><a href="Sketch.Driver.html">Driver</a></li><li><a href="Sketch.EnumBase.html">EnumBase</a></li><li><a href="Sketch.SketchGen.html">SketchGen</a></li><li><a href="Sketch.SketchGen.Label.html">Label</a></li><li><a href="Sketch.SketchGen.ScopeStackFrame.html">ScopeStackFrame</a></li></ul><h3>Namespaces</h3><ul><li><a href="MVM.html">MVM</a></li><li><a href="Palette.html">Palette</a></li><li><a href="Sketch.html">Sketch</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Thu Sep 24 2015 14:12:09 GMT+0100 (GMT Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
